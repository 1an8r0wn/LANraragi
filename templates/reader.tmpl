<html>
		<head>
			<title>[% arcname %]</title>
			
			<meta name="viewport" content="width=device-width" />
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

			<link type="image/png" rel="icon" href="./img/favicon.ico" />
			<link rel="stylesheet" type="text/css" href="./styles/lrr.css" />
			<link rel="stylesheet" type="text/css" href="./bower_components/font-awesome/css/font-awesome.min.css" />
			<link rel="stylesheet" type="text/css" href="./bower_components/jquery-toast-plugin/dist/jquery.toast.min.css" />

			<script src="./js/css.js" type="text/JAVASCRIPT"></script>
			<script src="./bower_components/jquery/dist/jquery.min.js" type="text/JAVASCRIPT"></script>
			<script src="./bower_components/jQuery-rwdImageMaps/jquery.rwdImageMaps.min.js" type="text/JAVASCRIPT"></script>
			<script src="./bower_components/jquery-toast-plugin/dist/jquery.toast.min.js" type="text/JAVASCRIPT"></script>
			
		</head>

		<body onload=" $('img[usemap]').rwdImageMaps(); set_style_from_storage();">

		<!--Specific links for reader JS; Also define which page is left and which is right based on read order -->
		[% IF readorder %]
			[% leftpage = pagenum + 1 %]
			[% rightpage = pagenum - 1 %]
			<a id="next" href="./reader.pl?id=[% id %]&page=[% leftpage %]" style="display:none"></a>
		[% ELSE %]
			[% leftpage = pagenum - 1 %]
			[% rightpage = pagenum + 1 %]
			<a id="next" href="./reader.pl?id=[% id %]&page=[% rightpage %]" style="display:none"></a>
		[% END %]

			
		[% cssdrop %]
		<script>set_style_from_storage();</script>
		<script src="./js/reader.js"></script>
		
		<div id="i1" class="sni" style="max-width: 1200px">
				<h1>[% arcname %]</h1>
				
				<div id="i2">
					[% INCLUDE pagesel %] 
					[% INCLUDE arrows %] 
					[% INCLUDE fileinfo %] 
				</div>
				
				<div id ="i3">
				
					<a id ="display">
						<img id="img" style="max-width:100%; height: auto; width: auto; " src="[% imgpath %]" usemap="#Map" />
						<map name="Map" id="Map">
						    <area alt="" title="" href="./reader.pl?id=[% id %]&page=[% leftpage %]" shape="rect" coords="0,0,[% mapwidth %],[% height %]" />
						    <area alt="" title="" href="./reader.pl?id=[% id %]&page=[% rightpage %]" shape="rect" coords="[% mapwidth + 1 %],0,[% width %],[%height%]" />
						</map>
					</a>
		
				</div>
				
				<div id = "i4">
					[% INCLUDE fileinfo %] 
					[% INCLUDE pagesel %] 
					[% INCLUDE arrows %] 
				</div>
				
				<div id="i5">
					<div class="sb">
						<a href="./">
							<i class="fa fa-angle-down fa-4x"></i>
						</a>
					</div>
				</div>

				[% IF userlogged %]
				<div id="i6" class="if">
					<i class="fa fa-caret-right fa-lg"></i>
					<a href="./reader.pl?id=[% id %]&page=[% pagenum %]&force_reload=1">Clean Archive Cache</a>
					<i class="fa fa-caret-right fa-lg"></i>
					<a href="./reader.pl?id=[% id %]&reload_thumbnail=1">Regenerate Archive Thumbnail </a>
				</div>
				[% END %]
				
				<div id="i7" class="if">
					<i class="fa fa-caret-right fa-lg"></i>
					<a href="[% imgpath %]">View full-size image</a>
				</div>
				
			</div>

		</body>
</html>

[% #compute those blocks before getting to the main html %]
[% BLOCK arrows %]
   <div class="sn">
		<a href="./reader.pl?id=[% id %]&page=1"> 
			<i class="fa fa-angle-double-left fa-2x"></i> 
		</a>

		<a id="left" href="./reader.pl?id=[% id %]&page=[% leftpage %]"> 
			<i class="fa fa-angle-left fa-2x"></i> 
		</a>

		<div class="pagecount">
			<span id ="current">[% pagenum %]</span> / <span id ="max">[% arcpages %]</span> 
		</div>

		<a id="right" href="./reader.pl?id=[% id %]&page=[% rightpage %]"> 
			<i class="fa fa-angle-right fa-2x"></i> 
		</a>

		<a href="./reader.pl?id=[% id %]&page=[% arcpages %]"> 
			<i class="fa fa-angle-double-right fa-2x"></i> 
		</a>
	</div>
[% END %]

[% BLOCK pagesel %]
	<div style="position: absolute; right: 20px; z-index:20" class="page_dropdown" >

		<form style="float: right;">
			<select size="1"  onChange="location = this.options[this.selectedIndex].value;">

		[% page = 1 %]
		[% WHILE page < arcpages + 1 %]

			[% IF (page == pagenum) %]
				<option selected="selected" value="./reader.pl?id=[% id %]&page=[% page %]">Page [% page %]</option>
			[% ELSE %]
				<option value="./reader.pl?id=[% id %]&page=[% page %]">Page [% page %]</option>
			[% END %]

			[% page = page + 1 %]
		[% END %]

			</select>
		</form>

		<a href="#" onclick="toastHelpReader()">
			<i class="fa fa-3x" style="padding-right: 10px; margin-top: -5px">?</i>
		</a>	

	</div>
[% END %]

[% BLOCK fileinfo %]
	<div id = "fileinfo">
	[% filename %] :: [% width %] x [% height %] :: [% size %]KBs
	</div>
[% END %]